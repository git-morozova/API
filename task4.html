<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Task 4</title>
</head>
<body>
  <style>
    .flex { display: flex; gap:30px; padding: 20px 10px 10px }
    .flex-block { padding: 5px 10px }
    .btn { padding: 0; background-color: transparent; border: none; outline: none; -webkit-tap-highlight-color: transparent; box-shadow: none; cursor: pointer; margin: 5px 10px; padding: 10px 15px; border-radius: 1px; font-size: 12px; line-height: 15px; text-transform: uppercase; color: white; background: #315efb; transition: 0.3s;}
    .btn:hover { box-shadow: 0px 2px 8px 2px rgba(141,150,178,.3); transform: scale(1.05) } 
    #errorText { display: block; color: red }
  </style>

  <button class="btn">
    Получить данные      
  </button>  

  <div class="flex">
    <!-- иконка-глобус -->
    <svg fill="#315efb" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
    height="100px" width="100px" viewBox="0 0 49.442 49.442"
	 xml:space="preserve">
      <g>
        <g>
          <path d="M25.639,38.596c0.004,0,0.008-0.002,0.013-0.002c0.007,0,0.015,0.002,0.022,0.002c4.626,0,8.771-2.107,11.524-5.41
            c0.252-0.303,0.492-0.618,0.72-0.94c1.733-2.446,2.756-5.431,2.756-8.65c0-3.219-1.021-6.202-2.756-8.648
            c-0.228-0.323-0.467-0.638-0.72-0.94c-2.754-3.303-6.897-5.41-11.524-5.41c-0.008,0-0.016,0-0.022,0c-0.005,0-0.009,0-0.013,0
            c-0.018,0-0.035,0.002-0.052,0.002c-4.592,0.026-8.7,2.128-11.436,5.409c-0.253,0.303-0.492,0.617-0.721,0.939
            c-1.733,2.446-2.757,5.429-2.757,8.648c0,3.221,1.023,6.204,2.757,8.65c0.229,0.321,0.468,0.638,0.721,0.938
            c2.736,3.281,6.844,5.383,11.436,5.41C25.604,38.594,25.621,38.596,25.639,38.596z M26.29,37.311v-7.566
            c2.116,0.053,4.109,0.368,5.875,0.893C30.943,34.34,28.787,36.924,26.29,37.311z M29.95,36.682
            c1.399-1.336,2.563-3.301,3.36-5.666c1.081,0.398,2.054,0.881,2.89,1.429C34.567,34.385,32.413,35.873,29.95,36.682z
            M36.927,31.506c-0.949-0.635-2.05-1.188-3.27-1.643c0.434-1.592,0.711-3.332,0.79-5.165h4.947
            C39.195,27.221,38.307,29.549,36.927,31.506z M39.441,23.468h-4.97c-0.01-2.191-0.304-4.27-0.812-6.143
            c1.218-0.453,2.317-1.006,3.268-1.64C38.483,17.894,39.414,20.573,39.441,23.468z M36.202,14.744
            c-0.837,0.55-1.812,1.032-2.895,1.432c-0.797-2.365-1.959-4.332-3.358-5.668C32.413,11.316,34.569,12.804,36.202,14.744z
            M26.29,9.879c2.497,0.387,4.647,2.974,5.871,6.677c-1.765,0.522-3.756,0.84-5.871,0.89V9.879z M25.059,9.87v7.575
            c-2.142-0.051-4.157-0.374-5.938-0.908C20.357,12.809,22.534,10.216,25.059,9.87z M21.289,10.546
            c-1.379,1.329-2.523,3.273-3.313,5.607c-1.058-0.396-2.01-0.872-2.831-1.409C16.754,12.832,18.871,11.361,21.289,10.546z
            M14.423,15.685c0.932,0.623,2.01,1.168,3.202,1.616c-0.515,1.88-0.81,3.965-0.82,6.167h-4.896
            C11.935,20.573,12.867,17.893,14.423,15.685z M11.953,24.699h4.876c0.08,1.843,0.358,3.592,0.796,5.189
            c-1.193,0.449-2.271,0.994-3.202,1.617C13.043,29.549,12.155,27.221,11.953,24.699z M15.149,32.444
            c0.82-0.537,1.771-1.013,2.826-1.407c0.789,2.335,1.936,4.277,3.314,5.607C18.871,35.829,16.759,34.355,15.149,32.444z
            M25.059,37.32c-2.524-0.346-4.705-2.938-5.94-6.666c1.78-0.535,3.798-0.857,5.94-0.91V37.32z M18.774,29.498
            c-0.389-1.477-0.638-3.093-0.713-4.8l-0.024-1.23c0.01-2.067,0.279-4.02,0.742-5.774c1.895,0.579,4.023,0.93,6.28,0.984h1.231
            c2.229-0.055,4.335-0.396,6.213-0.965c0.46,1.75,0.728,3.696,0.738,5.755l-0.024,1.23c-0.075,1.698-0.323,3.31-0.708,4.778
            c-1.88-0.568-3.986-0.912-6.219-0.965h-1.231C22.799,28.567,20.669,28.917,18.774,29.498z"/>
          <path d="M21.432,24.834c0.214-0.13,0.438-0.257,0.673-0.378c0.235-0.122,0.451-0.259,0.647-0.409
            c0.196-0.149,0.356-0.325,0.482-0.525c0.127-0.2,0.19-0.447,0.19-0.738c0-0.239-0.045-0.45-0.135-0.631
            c-0.088-0.181-0.215-0.33-0.378-0.447c-0.164-0.117-0.359-0.206-0.589-0.265c-0.229-0.059-0.48-0.089-0.754-0.089
            c-0.306,0-0.581,0.045-0.827,0.131c-0.245,0.087-0.454,0.215-0.624,0.383c-0.169,0.168-0.296,0.373-0.379,0.617
            c-0.083,0.244-0.115,0.523-0.097,0.837h1.228c-0.009-0.279,0.038-0.505,0.141-0.677c0.102-0.173,0.283-0.259,0.546-0.259
            c0.152,0,0.281,0.04,0.388,0.122c0.107,0.08,0.16,0.225,0.16,0.434c0,0.083-0.021,0.157-0.062,0.223s-0.094,0.124-0.157,0.176
            c-0.063,0.053-0.13,0.101-0.202,0.145c-0.072,0.043-0.137,0.083-0.193,0.117c-0.143,0.087-0.291,0.175-0.443,0.266
            c-0.153,0.088-0.3,0.182-0.441,0.279c-0.142,0.099-0.274,0.203-0.399,0.316c-0.123,0.113-0.233,0.235-0.329,0.366
            c-0.113,0.151-0.199,0.322-0.258,0.511c-0.059,0.188-0.082,0.391-0.068,0.613h3.938v-1.109h-2.058V24.834z"/>
          <path d="M27.26,25.952v-0.901h0.614V23.94H27.26v-2.535h-1.301l-2.077,2.418v1.229h2.019v0.9L27.26,25.952L27.26,25.952z
            M24.79,23.94l1.11-1.274v1.274H24.79z"/>
          <path d="M29.697,24.161c0-0.135,0.018-0.244,0.05-0.329s0.073-0.152,0.124-0.199c0.05-0.049,0.104-0.081,0.167-0.099
            c0.06-0.017,0.119-0.026,0.176-0.026c0.097,0,0.171,0.017,0.227,0.05c0.054,0.032,0.097,0.078,0.127,0.137s0.051,0.13,0.059,0.212
            c0.009,0.083,0.014,0.173,0.014,0.269v1.777h1.294v-2.326c0-0.196-0.031-0.365-0.095-0.51c-0.062-0.144-0.148-0.263-0.258-0.355
            c-0.109-0.094-0.233-0.165-0.373-0.213s-0.286-0.072-0.438-0.072c-0.273,0-0.492,0.043-0.652,0.128
            c-0.161,0.085-0.297,0.192-0.405,0.323h-0.014v-1.64h-1.293v4.665h1.293L29.697,24.161L29.697,24.161z"/>
          <path d="M25.323,2.811c6.39,0,12.095,2.969,15.824,7.592l-2.448,1.73l7.704,2.63l-0.801-7.505l-2.157,1.523
            C39.202,3.437,32.66,0,25.323,0c-3.613,0-7.035,0.834-10.085,2.316l0.898,2.696C18.898,3.608,22.018,2.811,25.323,2.811z"/>
          <path d="M45.499,28.365c-0.707,3.018-2.108,5.917-4.238,8.441c-4.121,4.886-10.067,7.332-16.007,7.203l0.258-2.988l-6.978,4.193
            l6.252,4.228l0.228-2.632c6.818,0.201,13.666-2.584,18.396-8.19c2.33-2.763,3.897-5.915,4.731-9.203L45.499,28.365z"/>
          <path d="M5.632,31.42c-2.427-5.91-1.848-12.315,1.014-17.522l2.529,1.61L8.682,7.381l-6.638,3.59l2.229,1.418
            c-3.331,5.953-4.027,13.313-1.24,20.099c1.371,3.345,3.442,6.191,5.972,8.451l2.153-1.856C8.809,37.062,6.886,34.477,5.632,31.42z
            "/>
        </g>
      </g>
    </svg>
    <div class="flex-block">
      <h3>
        Временная зона
      </h3>
      <p id="userTmezone">
        ___
      </p>
    </div>
  </div>

  <div class="flex">
    <!-- иконка-календарь -->
    <svg height="100px" width="100px" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 5C12 4.44772 12.4477 4 13 4C13.5523 4 14 4.44772 14 5V11C14 11.5523 13.5523 12 13 12C12.4477 12 12 11.5523 12 11V5Z" fill="#315efb"/>
      <path d="M28 5C28 4.44772 28.4477 4 29 4C29.5523 4 30 4.44772 30 5V11C30 11.5523 29.5523 12 29 12C28.4477 12 28 11.5523 28 11V5Z" fill="#315efb"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M14 23H12L12 25H14V23ZM12 21C10.8954 21 10 21.8954 10 23V25C10 26.1046 10.8954 27 12 27H14C15.1046 27 16 26.1046 16 25V23C16 21.8954 15.1046 21 14 21H12Z" fill="#315efb"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M22 23H20L20 25H22V23ZM20 21C18.8954 21 18 21.8954 18 23V25C18 26.1046 18.8954 27 20 27H22C23.1046 27 24 26.1046 24 25V23C24 21.8954 23.1046 21 22 21H20Z" fill="#315efb"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M30 23H28L28 25H30V23ZM28 21C26.8954 21 26 21.8954 26 23V25C26 26.1046 26.8954 27 28 27H30C31.1046 27 32 26.1046 32 25V23C32 21.8954 31.1046 21 30 21H28Z" fill="#315efb"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M14 31H12L12 33H14V31ZM12 29C10.8954 29 10 29.8954 10 31V33C10 34.1046 10.8954 35 12 35H14C15.1046 35 16 34.1046 16 33V31C16 29.8954 15.1046 29 14 29H12Z" fill="#315efb"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M22 31H20L20 33H22V31ZM20 29C18.8954 29 18 29.8954 18 31V33C18 34.1046 18.8954 35 20 35H22C23.1046 35 24 34.1046 24 33V31C24 29.8954 23.1046 29 22 29H20Z" fill="#315efb"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M9 10H33C34.1046 10 35 10.8954 35 12V28C35.6906 28 36.3608 28.0875 37 28.252V12C37 9.79086 35.2091 8 33 8H9C6.79086 8 5 9.79086 5 12V36C5 38.2091 6.79086 40 9 40H28.0703C27.7122 39.381 27.4347 38.7095 27.252 38H9C7.89543 38 7 37.1046 7 36V12C7 10.8954 7.89543 10 9 10Z" fill="#315efb"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M36 19H6V17H36V19Z" fill="#315efb"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M35 42C38.3137 42 41 39.3137 41 36C41 32.6863 38.3137 30 35 30C31.6863 30 29 32.6863 29 36C29 39.3137 31.6863 42 35 42ZM35 44C39.4183 44 43 40.4183 43 36C43 31.5817 39.4183 28 35 28C30.5817 28 27 31.5817 27 36C27 40.4183 30.5817 44 35 44Z" fill="#315efb"/>
      <path fill-rule="evenodd" clip-rule="evenodd" d="M35 31.1787C35.5523 31.1787 36 31.6264 36 32.1787V36.4768L38.4515 38.1785C38.9052 38.4934 39.0177 39.1165 38.7027 39.5702C38.3878 40.0239 37.7647 40.1364 37.311 39.8215L34 37.5232V32.1787C34 31.6264 34.4477 31.1787 35 31.1787Z" fill="#315efb"/>
    </svg>
    <div class="flex-block">
      <h3>
        Дата и время
      </h3>
      <p id="userDatetime">
         ___
      </p>
    </div>   
  </div>
  <div id="errorText">      
  </div>

  <script>
    const btn = document.querySelector('.btn');   

    // обработчик кнопки
    btn.addEventListener('click', () => {    
      errorText.innerText = ''; 
     
      if (!navigator.geolocation) {
        error();
      } else {
        userTmezone.innerText = userDatetime.innerText = "Получаю данные";
        navigator.geolocation.getCurrentPosition(success, error);
      }

      // функция обработки запроса
       function success(position) {
        // формируем url запроса
        const { longitude, latitude }  = position.coords;
        const url = `https://api.ipgeolocation.io/timezone?apiKey=32bcd4a6e4b548968e7afcdb682ac679&lat=` + latitude + `&long=` + longitude;

        // делаем запрос и выводим результаты на экран        
         fetch (url)
          .then(response => response.json())
          .then(data => {
                userTmezone.innerText = data.timezone;
                userDatetime.innerText = data.date_time_txt; 
          })                
          .catch(() => { error() }); // почему-то просто ".catch(error())" срабатывает всегда, причем перед всеми .then
        }
            
      // функция обработки ошибки
      function error () {
        userTmezone.innerText = userDatetime.innerText = "";
        errorText.innerText = 'Информация недоступна';
      }
    
    });
  </script>
    
</body>
</html>